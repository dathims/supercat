"use strict";angular.module("supercatApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","geolocation","ngMaterial","restangular","LocalStorageModule","angularMoment"]).constant("envConfig",{url_prod:"https://supertiger.herokuapp.com",url_dev:"http://localhost:3000"}).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/dashboard.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl"}).when("/signin",{templateUrl:"views/signin.html",controller:"SigninCtrl"}).when("/discover",{templateUrl:"views/discover.html",controller:"DiscoverCtrl"}).when("/create-room",{templateUrl:"views/create-room.html",controller:"CreateRoomCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"MainCtrl"}).when("/channels/:id",{templateUrl:"views/channels/show.html",controller:"ChannelCtrl"}).otherwise({redirectTo:"/login"})}]).config(["RestangularProvider","envConfig",function(a,b){a.setBaseUrl(b.url_dev),a.setRequestSuffix(".json"),a.setDefaultHeaders({"Content-Type":"application/json",Accept:"application/json"})}]).config(["localStorageServiceProvider",function(a){a.setPrefix("_supercat")}]).run(["localStorageService","Restangular",function(a,b){a.get("user")&&(b.configuration.defaultHeaders["X-CSRF-Token"]=a.get("user").auth_token)}]),angular.module("supercatApp").controller("MainCtrl",["Restangular","$scope","localStorageService","$location","geolocation",function(a,b,c,d,e){e.getLocation().then(function(a){b.coords={lat:a.coords.latitude,"long":a.coords.longitude},c.set("local",b.coords)}),c.isSupported&&(!c.get("local"),c.get("user")?(b.user=c.get("user"),b.user.gravatar=b.user.email_md5):d.url("/signin"))}]),angular.module("supercatApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("supercatApp").controller("SignupCtrl",["$scope","$location","geolocation","Restangular","localStorageService",function(a,b,c,d,e){a.user={},c.getLocation().then(function(b){a.coords={lat:b.coords.latitude,"long":b.coords.longitude}}),a.submit=function(){console.log(a.user);var c=d.all("users"),f=c.post({user:a.user}).then(function(a){console.log(a);var c="user",g=a;e.isSupported&&e.set(c,g),d.configuration.defaultHeaders["X-CSRF-Token"]=a.auth_token,b.path("/dashboard"),console.log(f)})}}]),angular.module("supercatApp").controller("SigninCtrl",["$scope","$location","geolocation","Restangular","localStorageService",function(a,b,c,d,e){e.isSupported&&e.get("user")&&b.path("dashboard"),a.user={},c.getLocation().then(function(b){a.coords={lat:b.coords.latitude,"long":b.coords.longitude}}),a.displayPassword=!0,a.togglePassword=function(){a.displayPassword=!a.displayPassword},a.submit=function(){var c=d.all("users");a.displayPassword?(console.log(a.user),c.customPOST({user:a.user},"sign_in").then(function(a){console.log(a);var c="user",f=a;e.isSupported&&e.set(c,f),d.configuration.defaultHeaders["X-CSRF-Token"]=a.auth_token,b.path("/dashboard")})):c.customPOST({user:a.user},"password").then(function(a){console.log(a),b.path("/dashboard")})}}]),angular.module("supercatApp").controller("DiscoverCtrl",["Restangular","$scope",function(a,b){b.list={};var c=a.all("channels");c.getList().then(function(a){b.list=a})}]),angular.module("supercatApp").controller("CreateRoomCtrl",["Restangular","$scope","localStorageService","$location",function(a,b,c,d){b.channel={};var e=a.all("channels");b.geo=c.get("local"),b.user=c.get("user"),b.channel.longitude=b.geo["long"],b.channel.latitude=b.geo.lat,b.createChannel=function(){e.post({channel:b.channel}).then(function(){d.path("/dashboard")})}}]),angular.module("supercatApp").controller("LoginCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("supercatApp").controller("GlobalCtrl",["$scope",function(a){a.isVisible="true"}]),angular.module("supercatApp").controller("NavigationCtrl",["$scope","localStorageService","$location","$rootScope",function(a,b,c,d){d.toggleNavOpen=!1,d.toggleNav=function(){d.toggleNavOpen=!d.toggleNavOpen},a.disconnectProfil=function(){return c.path("/login"),b.clearAll()}}]),angular.module("supercatApp").controller("UserCtrl",function(){}),angular.module("supercatApp").service("userService",["Restangular","localStorageService",function(a,b){var c={};c.identifier=function(a){b.one("users",a).get().then(function(a){console.log(a)})}}]).directive("userId",["userService",function(a){return{restrict:"A",link:function(b){a.userObj.identifier(b)}}}]);